<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Heart Heist: An Escape Room</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: white; overflow-x: hidden; }
        .cursive { font-family: 'Dancing Script', cursive; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body x-data="gameLogic()">

    <!-- Background Decoration -->
    <div class="fixed inset-0 pointer-events-none">
        <div class="absolute top-10 left-10 w-64 h-64 bg-rose-500/10 rounded-full blur-3xl"></div>
        <div class="absolute bottom-10 right-10 w-96 h-96 bg-indigo-500/10 rounded-full blur-3xl"></div>
    </div>

    <main class="relative min-h-screen flex items-center justify-center p-6">
        
        <!-- Game Container -->
        <div class="w-full max-w-xl glass rounded-3xl p-8 shadow-2xl relative overflow-hidden">
            
            <!-- Progress Bar -->
            <div class="absolute top-0 left-0 h-1 bg-gradient-to-r from-rose-500 to-indigo-500 transition-all duration-500" 
                 :style="`width: ${(level / 4) * 100}%` "></div>

            <!-- Start Screen -->
            <template x-if="level === 0">
                <div class="text-center animate__animated animate__fadeIn">
                    <h1 class="text-5xl cursive mb-6 text-rose-400">The Heart Heist</h1>
                    <p class="text-slate-300 mb-8 leading-relaxed">I've locked your surprise in a digital vault. To get it, you'll need to prove how well you know us. Are you ready?</p>
                    <button @click="level = 1" class="px-8 py-3 bg-rose-600 hover:bg-rose-500 rounded-full font-bold transition-all transform hover:scale-105">
                        Begin Adventure
                    </button>
                </div>
            </template>

            <!-- Level 1: The First Memory -->
            <template x-if="level === 1">
                <div class="animate__animated animate__fadeInRight">
                    <span class="text-rose-500 font-bold tracking-widest text-xs uppercase">Level 01: The Memory</span>
                    <h2 class="text-2xl font-semibold mt-2 mb-6">Where did we have our very first date?</h2>
                    <!-- CUSTOMIZE ME: Change the answer below -->
                    <input type="text" x-model="input" @keyup.enter="checkLevel(1, 'starbucks')" 
                           placeholder="Enter location name..."
                           :class="error ? 'shake border-red-500' : 'border-slate-700'"
                           class="w-full bg-slate-900/50 border rounded-xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-rose-500 transition-all">
                    <p x-show="error" class="text-red-400 mt-2 text-sm italic">That's not what my heart remembers... try again!</p>
                    <button @click="checkLevel(1, 'starbucks')" class="mt-6 w-full py-4 bg-indigo-600 rounded-xl font-bold">Unlock Door</button>
                </div>
            </template>

            <!-- Level 2: The Hidden Key -->
            <template x-if="level === 2">
                <div class="animate__animated animate__fadeInRight text-center">
                    <span class="text-rose-500 font-bold tracking-widest text-xs uppercase">Level 02: The Search</span>
                    <h2 class="text-2xl font-semibold mt-2 mb-6">I've hidden a heart in this room. Can you find it?</h2>
                    
                    <div class="grid grid-cols-4 gap-4 p-4 bg-slate-800/50 rounded-2xl relative">
                        <template x-for="i in 12">
                            <div @click="wrongItem()" class="h-16 bg-slate-700/30 rounded-lg cursor-pointer hover:bg-slate-700/50 flex items-center justify-center text-xl transition-colors">
                                üì¶
                            </div>
                        </template>
                        <!-- THE HIDDEN KEY -->
                        <div @click="level = 3; input = ''; error = false" class="h-16 bg-slate-700/30 rounded-lg cursor-pointer hover:bg-slate-700/50 flex items-center justify-center text-xl transition-colors">
                            <span class="opacity-0 hover:opacity-100 transition-opacity duration-500">‚ù§Ô∏è</span>
                        </div>
                        <template x-for="i in 3">
                            <div @click="wrongItem()" class="h-16 bg-slate-700/30 rounded-lg cursor-pointer hover:bg-slate-700/50 flex items-center justify-center text-xl transition-colors">
                                üì¶
                            </div>
                        </template>
                    </div>
                    <p x-show="error" class="text-amber-400 mt-4 text-sm italic">Just an empty box... keep looking!</p>
                </div>
            </template>

            <!-- Level 3: The Cipher -->
            <template x-if="level === 3">
                <div class="animate__animated animate__fadeInRight">
                    <span class="text-rose-500 font-bold tracking-widest text-xs uppercase">Level 03: The Future</span>
                    <h2 class="text-2xl font-semibold mt-2 mb-4">Unscramble our "Song":</h2>
                    <div class="flex gap-2 mb-6 justify-center">
                        <template x-for="word in ['FECT', 'PER']">
                            <span class="px-4 py-2 bg-slate-800 rounded-lg text-rose-300 font-mono border border-rose-500/20" x-text="word"></span>
                        </template>
                    </div>
                    <!-- CUSTOMIZE ME: Change the answer below -->
                    <input type="text" x-model="input" @keyup.enter="checkLevel(3, 'perfect')" 
                           placeholder="The unscrambled word..."
                           class="w-full bg-slate-900/50 border border-slate-700 rounded-xl py-4 px-6 focus:outline-none focus:ring-2 focus:ring-rose-500 shadow-inner">
                    <button @click="checkLevel(3, 'perfect')" class="mt-6 w-full py-4 bg-rose-600 rounded-xl font-bold shadow-lg shadow-rose-900/20">Finalize Sequence</button>
                </div>
            </template>

            <!-- Final Reveal -->
            <template x-if="level === 4">
                <div class="text-center animate__animated animate__zoomIn">
                    <div class="text-6xl mb-6">üéÅ</div>
                    <h1 class="text-4xl cursive mb-4 text-rose-400">You Unlocked My Heart!</h1>
                    <div class="space-y-4 text-slate-300 mb-8">
                        <p>Congratulations, my love! You‚Äôve solved every puzzle.</p>
                        <div class="p-4 bg-white/5 rounded-xl border border-white/10 italic">
                            "Your prize is a fancy dinner at your favorite restaurant this Friday at 8:00 PM. I love you!"
                        </div>
                    </div>
                    <button onclick="window.location.reload()" class="text-sm text-slate-500 hover:text-rose-400 underline transition-colors">Play Again</button>
                </div>
            </template>

        </div>
    </main>

    <script>
        function gameLogic() {
            return {
                level: 0,
                input: '',
                error: false,
                
                checkLevel(lvl, answer) {
                    // Normalize input for easier winning
                    if (this.input.toLowerCase().trim() === answer.toLowerCase()) {
                        this.level = lvl + 1;
                        this.input = '';
                        this.error = false;
                    } else {
                        this.error = true;
                        setTimeout(() => this.error = false, 1000);
                    }
                },

                wrongItem() {
                    this.error = true;
                    setTimeout(() => this.error = false, 1000);
                }
            }
        }
    </script>
</body>
</html>
